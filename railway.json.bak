{
  "$schema": "https://railway.app/railway.schema.json",
  "name": "ultra-agent-core-blueprint",
  "description": "Ultra Agent OS â€“ Core Blueprint with API, UI, Worker, PostgreSQL and Redis",
  "deploy": {
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  },
  "services": [
    {
      "name": "ultra-agent-api",
      "source": ".",
      "dockerfilePath": "apps/api/Dockerfile",
      "healthcheck": {
        "path": "/health",
        "interval": 30,
        "timeout": 10,
        "retries": 5
      }
    },
    {
      "name": "ultra-agent-worker",
      "source": ".",
      "dockerfilePath": "apps/worker/Dockerfile"
    },
    {
      "name": "ultra-agent-ui",
      "source": ".",
      "dockerfilePath": "apps/ui/Dockerfile.static",
      "healthcheck": {
        "path": "/health",
        "interval": 30,
        "timeout": 10,
        "retries": 5
      },
      "env": {
        "PORT": "3003",
        "RAILWAY_DOCKER_EXPOSE_PORT": "3003",
        "API_URL": "${{ultra-agent-api.RAILWAY_PUBLIC_DOMAIN}}"
      }
    }
  ],
  "databases": {
    "Postgres": {
      "version": "15",
      "generator": "POSTGRESQL"
    }
  },
  "redis": {
    "version": "7",
    "generator": "REDIS"
  }
}